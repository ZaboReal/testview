(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3085:(e,t,s)=>{Promise.resolve().then(s.bind(s,8602))},8602:(e,t,s)=>{"use strict";s.d(t,{default:()=>I});var a=s(5155),r=s(2115),l=s(3101),n=s(2821),i=s(5889);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,n.$)(t))}let o=(0,l.F)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:d(o({variant:s}),t),...r})}var u=s(7120);let x=r.forwardRef((e,t)=>{let{className:s,value:r,...l}=e;return(0,a.jsx)(u.bL,{ref:t,className:d("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,a.jsx)(u.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});x.displayName=u.bL.displayName;var m=s(6485),f=s(6983);function h(e){let{testRun:t}=e,s=new Date(t.start_time).toLocaleString(),r=Math.round(t.queries_completed/t.total_queries*100);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold mb-2",children:"Test Results Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{"data-testid":"text-start-time",children:s})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{"data-testid":"text-base-url",children:t.base_url})]})]})]}),t.in_progress?(0,a.jsx)(c,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/20",children:"In Progress"}):(0,a.jsx)(c,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/20",children:"Completed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Query Progress"}),(0,a.jsxs)("span",{className:"font-mono","data-testid":"text-progress",children:[t.queries_completed," / ",t.total_queries]})]}),(0,a.jsx)(x,{value:r,className:"h-2"})]})]})}let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",s),...r})});function g(e){let{title:t,value:s,icon:r,trend:l,variant:n="default"}=e;return(0,a.jsx)(p,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:t}),(0,a.jsx)("p",{className:"text-3xl font-semibold font-mono",children:s}),l&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:l})]}),(0,a.jsx)("div",{className:"".concat({success:"text-green-500",warning:"text-amber-500",error:"text-red-500",info:"text-blue-500",default:"text-muted-foreground"}[n]),children:(0,a.jsx)(r,{className:"w-8 h-8"})})]})})}p.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("p-6 pt-0",s),...r})}).displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var v=s(1362),b=s(8874),j=s(6617);function N(e){let{statistics:t}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(g,{title:"Success Rate",value:t.success_rate,icon:v.A,variant:"success",trend:"".concat(t.successful," successful")}),(0,a.jsx)(g,{title:"Timeouts",value:t.timeouts,icon:f.A,variant:"warning"}),(0,a.jsx)(g,{title:"Errors",value:t.errors,icon:b.A,variant:t.errors>0?"error":"default"}),(0,a.jsx)(g,{title:"Avg Products/Query",value:t.avg_products_per_query,icon:j.A,variant:"info",trend:"".concat(t.total_products_returned," total")})]})}let w=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:d("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});w.displayName="Input";var y=s(6673);let _=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),C=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:n=!1,...i}=e,o=n?y.DX:"button";return(0,a.jsx)(o,{className:d(_({variant:r,size:l,className:s})),ref:t,...i})});C.displayName="Button";var k=s(6651),A=s(5229);function S(e){let{searchQuery:t,onSearchChange:s,statusFilter:r,onStatusFilterChange:l}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(k.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(w,{type:"search",placeholder:"Search queries...",value:t,onChange:e=>s(e.target.value),className:"pl-9 pr-9","data-testid":"input-search"}),t&&(0,a.jsx)(C,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>s(""),"data-testid":"button-clear-search",children:(0,a.jsx)(A.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{value:"all",label:"All"},{value:"success",label:"Success"},{value:"timeout",label:"Timeout"},{value:"error",label:"Error"}].map(e=>{let t=r.includes(e.value);return(0,a.jsx)(c,{variant:t?"default":"outline",className:"cursor-pointer hover-elevate active-elevate-2",onClick:()=>l(e.value),"data-testid":"badge-filter-".concat(e.value),children:e.label},e.value)})})]})}function R(e){let{status:t}=e,s={success:{icon:v.A,label:"Success",className:"bg-green-500/10 text-green-600 border-green-500/20 hover:bg-green-500/20"},timeout:{icon:f.A,label:"Timeout",className:"bg-amber-500/10 text-amber-600 border-amber-500/20 hover:bg-amber-500/20"},error:{icon:b.A,label:"Error",className:"bg-red-500/10 text-red-600 border-red-500/20 hover:bg-red-500/20"}}[t],r=s.icon;return(0,a.jsxs)(c,{variant:"outline",className:s.className,children:[(0,a.jsx)(r,{className:"w-3 h-3 mr-1"}),s.label]})}var z=s(5880),F=s(2108),q=s(4033),E=s(5239);function D(e){let{product:t}=e,[s,l]=(0,r.useState)(!1),n=Math.round(100*t.final_score),i=n>=80?"text-green-600":n>=60?"text-amber-600":"text-red-600";return(0,a.jsx)(p,{className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 p-4",children:[(0,a.jsx)("div",{className:"w-full md:w-32 h-40 md:h-auto flex-shrink-0 relative",children:(0,a.jsx)(E.default,{src:t.image_url,alt:t.name,fill:!0,className:"object-cover rounded-md",sizes:"(max-width: 768px) 100vw, 128px"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-base mb-1 line-clamp-2","data-testid":"text-product-name-".concat(t.id),children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground","data-testid":"text-brand-".concat(t.id),children:[String(t.brand||"Unknown")," \xb7 ",String(t.retailer||"Unknown")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsx)("span",{className:"text-lg font-semibold font-mono","data-testid":"text-price-".concat(t.id),children:t.price}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{value:n,className:"w-24 h-2"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(i),"data-testid":"text-score-".concat(t.id),children:t.score_percentage})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.key_strengths.slice(0,3).map((e,s)=>(0,a.jsx)(c,{variant:"secondary",className:"text-xs","data-testid":"badge-strength-".concat(t.id,"-").concat(s),children:e},s))}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)(C,{size:"sm",variant:"outline",asChild:!0,"data-testid":"button-view-product-".concat(t.id),children:(0,a.jsxs)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:["View Product ",(0,a.jsx)(z.A,{className:"w-3 h-3 ml-1"})]})}),(0,a.jsxs)(C,{size:"sm",variant:"ghost",onClick:()=>l(!s),"data-testid":"button-toggle-reasoning-".concat(t.id),children:[s?(0,a.jsx)(F.A,{className:"w-4 h-4 mr-1"}):(0,a.jsx)(q.A,{className:"w-4 h-4 mr-1"}),s?"Hide":"Show"," Details"]})]}),s&&(0,a.jsxs)("div",{className:"pt-3 border-t space-y-2","data-testid":"div-reasoning-".concat(t.id),children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:t.reasoning}),t.important_notes&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground italic",children:["Note: ",t.important_notes]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Confidence:"}),(0,a.jsx)(c,{variant:"outline",className:"text-xs capitalize",children:t.recommendation_confidence})]})]})]})]})})}function P(e){var t,s,l;let{result:n,index:i}=e,[d,o]=(0,r.useState)(!1),c=(null==(s=n.response)||null==(t=s.products)?void 0:t.length)||0,u=new Date(n.timestamp).toLocaleString();return(0,a.jsx)(p,{className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,a.jsxs)("span",{className:"text-xs text-muted-foreground font-mono",children:["#",i+1]}),(0,a.jsx)(R,{status:n.status}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground","data-testid":"text-timestamp-".concat(i),children:u})]}),(0,a.jsx)("h3",{className:"font-medium text-base mb-1","data-testid":"text-query-".concat(i),children:n.query}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[c," product",1!==c?"s":""," found"]})]}),c>0&&(0,a.jsx)(C,{variant:"ghost",size:"sm",onClick:()=>o(!d),"data-testid":"button-expand-".concat(i),children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.A,{className:"w-4 h-4 mr-1"}),"Collapse"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"w-4 h-4 mr-1"}),"Expand"]})})]}),d&&(null==(l=n.response)?void 0:l.products)&&(0,a.jsx)("div",{className:"pt-4 border-t space-y-3","data-testid":"div-products-".concat(i),children:n.response.products.map(e=>(0,a.jsx)(D,{product:e},e.id))})]})})}var L=s(9427),Q=s(7494),T=s(5379);function O(){let{theme:e,setTheme:t}=(0,T.D)(),[s,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{l(!0)},[]),s)?(0,a.jsx)(C,{variant:"ghost",size:"icon",onClick:()=>t("light"===e?"dark":"light"),"data-testid":"button-theme-toggle",children:"light"===e?(0,a.jsx)(Q.A,{className:"w-5 h-5"}):(0,a.jsx)(L.A,{className:"w-5 h-5"})}):(0,a.jsx)(C,{variant:"ghost",size:"icon","data-testid":"button-theme-toggle",children:(0,a.jsx)(L.A,{className:"w-5 h-5"})})}function I(e){let{initialData:t}=e,[s,l]=(0,r.useState)(t),[n,i]=(0,r.useState)(""),[d,o]=(0,r.useState)(["all"]),c=async e=>{try{let t=await e.text(),s=JSON.parse(t);l(s)}catch(e){console.error("Failed to parse uploaded file:",e),alert("Failed to parse the uploaded JSON file. Please check the file format.")}},u=(0,r.useMemo)(()=>s.results.filter(e=>{let t=e.query.toLowerCase().includes(n.toLowerCase()),s=d.includes("all")||d.includes(e.status);return t&&s}),[s,n,d]);return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-8 space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4 flex-wrap",children:[(0,a.jsx)(h,{testRun:s.test_run}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{var e;return null==(e=document.getElementById("file-upload-input"))?void 0:e.click()},className:"text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"button-upload-new",children:"Upload New File"}),(0,a.jsx)("input",{id:"file-upload-input",type:"file",accept:".json",className:"hidden",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&c(s)}}),(0,a.jsx)(O,{})]})]}),(0,a.jsx)(N,{statistics:s.statistics}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Query Results"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground","data-testid":"text-result-count",children:[u.length," result",1!==u.length?"s":""]})]}),(0,a.jsx)(S,{searchQuery:n,onSearchChange:i,statusFilter:d,onStatusFilterChange:e=>{"all"===e?o(["all"]):o(t=>{let s=t.includes(e)?t.filter(t=>t!==e):[...t.filter(e=>"all"!==e),e];return 0===s.length?["all"]:s})}}),(0,a.jsxs)("div",{className:"space-y-4",children:[u.map((e,t)=>(0,a.jsx)(P,{result:e,index:t},t)),0===u.length&&(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground","data-testid":"text-no-results",children:"No results found matching your filters"})]})]})]})})}}},e=>{e.O(0,[572,441,255,358],()=>e(e.s=3085)),_N_E=e.O()}]);